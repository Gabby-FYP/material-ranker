{% extends "site/pages/user/base.html" %}


{% block content %}
<!-- Main Content -->
<div class="main-content">
    <h2>Course Materials</h2>
    
    <div class="filter-container">
        <input type="text" id="searchInput" class="search-bar" placeholder="Search by Title, Topic..." onkeyup="filterCourses()">
        <select id="levelFilter" class="form-select" style="width: 200px;" onchange="filterCourses()">
            <option value="all">All Levels</option>
            <option value="100L">100 Level</option>
            <option value="200L">200 Level</option>
            <option value="300L">300 Level</option>
            <option value="400L">400 Level</option>
            <option value="500L">500 Level</option>
        </select>
    </div>

    <!-- Course Grid -->
    <div class="course-grid" id="courseGrid">

        <div class="course-card" hx-get="/materials/rate-materials/" hx-trigger="click" hx-swap="innerHTML"  hx-target="body" data-level="200L" data-title="Course Title 2" onclick="viewCourse('Course Title 2')">
            <img src="https://via.placeholder.com/150" alt="Course Image">
            <h5>Course Title 2</h5>
            <p>Rated by 95 people</p>
            <span class="badge bg-warning">3.5 ★</span>
        </div>

        <div class="course-card" hx-get="/materials/rate-materials/" hx-trigger="click" hx-swap="innerHTML"  hx-target="body" data-level="300L" data-title="Course Title 3" onclick="viewCourse('Course Title 3')">
            <img src="https://via.placeholder.com/150" alt="Course Image">
            <h5>Course Title 3</h5>
            <p>Rated by 150 people</p>
            <span class="badge bg-primary">4.5 ★</span>
        </div>

        <div class="course-card" hx-get="/materials/rate-materials/" hx-trigger="click" hx-swap="innerHTML"  hx-target="body" data-level="400L" data-title="Course Title 4" onclick="viewCourse('Course Title 4')">
            <img src="https://via.placeholder.com/150" alt="Course Image">
            <h5>Course Title 4</h5>
            <p>Rated by 200 people</p>
            <span class="badge bg-primary">4.8 ★</span>
        </div>

        <div class="course-card" hx-get="/materials/rate-materials/" hx-trigger="click" hx-swap="innerHTML"  hx-target="body" data-level="500L" data-title="Course Title 5" onclick="viewCourse('Course Title 5')">
            <img src="https://via.placeholder.com/150" alt="Course Image">
            <h5>Course Title 5</h5>
            <p>Rated by 180 people</p>
            <span class="badge bg-success">4.7 ★</span>
        </div>

    </div>
</div>

{% endblock content %}

{% block scripts %} 
<script>
    function filterCourses() {
        let selectedLevel = document.getElementById("levelFilter").value.toLowerCase();
        let searchQuery = document.getElementById("searchInput").value.toLowerCase();
        let courses = document.querySelectorAll(".course-card");

        courses.forEach(course => {
            let courseLevel = course.getAttribute("data-level").toLowerCase();
            let courseTitle = course.getAttribute("data-title").toLowerCase();
            
            let matchesLevel = selectedLevel === "all" || courseLevel === selectedLevel;
            let matchesSearch = courseTitle.includes(searchQuery);

            if (matchesLevel && matchesSearch) {
                course.style.display = "block";
            } else {
                course.style.display = "none";
            }
        });
    }


</script>
{% endblock scripts %}

